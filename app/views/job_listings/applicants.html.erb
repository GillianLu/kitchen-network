<h1>Applicants for <%= @job_listing.title %></h1>

<% if @applicants.any? %>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Application Time</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @applicants.each do |applied_job| %>
        <tr>
          <td><%= applied_job.talent.first_name %> <%= applied_job.talent.last_name %></td>
          <td><%= applied_job.talent.email %></td>
          <td><%= applied_job.created_at %></td>
          <td><%= applied_job.status || 'Pending' %></td>
          <td>
            <% if applied_job.status != 'confirmed' %>
              <%= link_to 'Confirm', confirm_applied_job_path(applied_job), method: :patch, data: { confirm: 'Are you sure?' } %>
            <% end %>
            <% if applied_job.status != 'rejected' %>
              <%= link_to 'Reject', reject_applied_job_path(applied_job), method: :patch, data: { confirm: 'Are you sure?' } %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No applicants found.</p>
<% end %>

<%= link_to 'Back to Job Listings', job_listings_path %>
<%= button_to 'Log Out', destroy_user_session_path, method: :delete, data: { confirm: 'Are you sure you want to log out?' } %>
